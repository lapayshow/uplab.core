{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/image-polygon.js","webpack:///./src/js/_vendor/jquery.canvasAreaDraw.min.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","window","canvasAreaDraw","require","initCanvasResize","targetNodeSelector","TIMEOUT","ITERATION_COUNTER","targetNode","document","querySelector","timeoutFunction","$canvas","$","find","resetTimeout","console","log","setTimeout","length","w","attr","h","k","newW","Math","max","innerWidth","k1","newH","innerHeight","k2","css","transform","concat","transformOrigin","position","marginTop","width","height","observer","disconnect","MutationObserver","clearTimeout","observe","attributes","childList","subtree","fn","this","each","f","e","v","apply","b","g","q","u","extend","imageUrl","val","replace","split","map","a","parseInt","getContext","Image","load","src","loaded","background","after","offsetX","pageX","target","offset","left","offsetY","pageY","top","round","x","y","canvas","globalCompositeOperation","fillStyle","strokeStyle","lineWidth","getCenter","fillRect","beginPath","moveTo","strokeRect","lineTo","closePath","fill","stroke","join","push","on","click","which","preventDefault","sqrt","pow","splice","dis","off","ready","min","abs","jQuery"],"mappings":"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","file":"/dist/js/image-polygon.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 11);\n","window.canvasAreaDraw = require('./_vendor/jquery.canvasAreaDraw.min');\n\nwindow.initCanvasResize = (targetNodeSelector) => {\n\n    let TIMEOUT;\n    let ITERATION_COUNTER = 0;\n\n    const TIMEOUT_TIME = 50;\n    const MAX_RECURSION_DEPTH = 15;\n\n    const targetNode = document.querySelector(targetNodeSelector);\n    if (!targetNode) return;\n\n    const timeoutFunction = () => {\n        const $canvas = $(targetNode).find('canvas');\n\n        // Если функция была вызвана слишком рано, то либо канваса, либо его размеров еще нет,\n        // поэтому мы заводим новый таймаут и будем это делать до тех пор,\n        // пока интересующие нас условия не возникнут.\n        const resetTimeout = () => {\n            console.log('resize canvas ... early');\n\n            if (ITERATION_COUNTER < MAX_RECURSION_DEPTH) {\n                ITERATION_COUNTER++;\n                TIMEOUT = setTimeout(timeoutFunction, TIMEOUT_TIME);\n            }\n        };\n\n        if (!$canvas.length) {\n            return resetTimeout();\n        }\n\n        const w = $canvas.attr('width');\n        const h = $canvas.attr('height');\n\n        // Если функция была вызвана сли\n        if (!w || !h) {\n            return resetTimeout();\n        }\n\n        let newW = Math.max(900, window.innerWidth - 420);\n        let k1 = newW / w;\n\n        let newH = Math.max(600, window.innerHeight - 150);\n        let k2 = newH / h;\n\n        let k;\n\n        if (k1 < k2) {\n            k = k1;\n            newH = h * k;\n        } else {\n            k = k2;\n            newW = w * k;\n        }\n\n        $canvas.css({\n            transform: `scale(${k})`,\n            transformOrigin: '0 0',\n            position: 'absolute',\n            marginTop: '50px',\n        });\n\n        console.log(`resize canvas ... to ${newW}x${newH}`);\n\n        $(targetNode).find('.canvas-placeholder').css({\n            width: newW,\n            height: newH,\n        });\n\n        observer.disconnect();\n    };\n\n    // Создаем слушатель изменений, при любом изменении в DOM-дереве\n    // внутри нужного контейнера \"заводим\" таймаут на изменение размеров канваса.\n    // При этом при каждом следующем изменении предыдущий таймаут сбрасывается.\n    // Таким образом, должен отработать только последний таймаут\n    const observer = new MutationObserver(() => {\n        clearTimeout(TIMEOUT);\n        TIMEOUT = setTimeout(timeoutFunction, TIMEOUT_TIME);\n    });\n\n    // Start observing the target node for configured mutations\n    observer.observe(\n        targetNode,\n        {\n            attributes: true,\n            childList: true,\n            subtree: true\n        }\n    );\n\n};\n","(function(d){d.fn.canvasAreaDraw=function(d){this.each(function(f,e){v.apply(e,[f,e,d])})};var v=function(t,f,e){var b,g,h,c,n,l,q,u,r,m,p=!1;t=d.extend({imageUrl:d(this).attr(\"data-image-url\")},e);e=d(f).val().replace(/[^0-9\\,]/ig,\"\");b=e.length?e.split(\",\").map(function(a){return parseInt(a,10)}):[];e=d('<button type=\"button\" class=\"btn\"><i class=\"icon-trash\"></i>\\u041e\\u0447\\u0438\\u0441\\u0442\\u0438\\u0442\\u044c</button>');h=d(\"<canvas>\");c=h[0].getContext(\"2d\");n=new Image;r=function(){h.attr(\"height\",\nn.height).attr(\"width\",n.width);l()};d(n).load(r);n.src=t.imageUrl;n.loaded&&r();h.css({background:\"url(\"+n.src+\")\"});d(f).after(\"<br>\",h,\"<br>\",e);q=function(a){a.offsetX||(a.offsetX=a.pageX-d(a.target).offset().left,a.offsetY=a.pageY-d(a.target).offset().top);b[g]=Math.round(a.offsetX);b[g+1]=Math.round(a.offsetY);l()};u=function(a){a.offsetX||(a.offsetX=a.pageX-d(a.target).offset().left,a.offsetY=a.pageY-d(a.target).offset().top);p||(p={x:Math.round(a.offsetX),y:Math.round(a.offsetY)});a={x:Math.round(a.offsetX),\ny:Math.round(a.offsetY)};for(var c=0;c<b.length;c++)b[c]=a.x-p.x+b[c],b[++c]=a.y-p.y+b[c];p=a;l()};l=function(){c.canvas.width=c.canvas.width;m();if(!(2>b.length)){c.globalCompositeOperation=\"destination-over\";c.fillStyle=\"rgb(255,255,255)\";c.strokeStyle=\"rgb(255,20,20)\";c.lineWidth=1;if(6<=b.length){var a=getCenter();c.fillRect(a.x-4,a.y-4,8,8)}c.beginPath();c.moveTo(b[0],b[1]);for(a=0;a<b.length;a+=2)c.fillRect(b[a]-2,b[a+1]-2,4,4),c.strokeRect(b[a]-2,b[a+1]-2,4,4),2<b.length&&1<a&&c.lineTo(b[a],\nb[a+1]);c.closePath();c.fillStyle=\"rgba(255,0,0,0.3)\";c.fill();c.stroke()}};m=function(){d(f).val(b.join(\",\"))};getCenter=function(){for(var a=[],c=0;c<b.length;c++)a.push({x:b[c],y:b[++c]});var d=a[0],e=a[a.length-1];d.x==e.x&&d.y==e.y||a.push(d);var k=e=d=0,h=a.length,m,f,g,c=0;for(f=h-1;c<h;f=c++)m=a[c],f=a[f],g=m.x*f.y-f.x*m.y,d+=g,e+=(m.x+f.x)*g,k+=(m.y+f.y)*g;g=3*d;return{x:e/g,y:k/g}};d(f).on(\"change\",function(){var a=d(f).val().replace(/[^0-9\\,]/ig,\"\");b=a.length?a.split(\",\").map(function(a){return parseInt(a,\n10)}):[];l()});d(document).find(e).click(function(){b=[];l()});d(document).find(h).on(\"mousedown\",function(a){var e,f,h=b.length;if(3===a.which)return!1;a.preventDefault();a.offsetX||(a.offsetX=a.pageX-d(a.target).offset().left,a.offsetY=a.pageY-d(a.target).offset().top);e=a.offsetX;a=a.offsetY;if(6<=b.length){var k=getCenter();c.fillRect(k.x-4,k.y-4,8,8);f=Math.sqrt(Math.pow(e-k.x,2)+Math.pow(a-k.y,2));if(6>f)return p=!1,d(this).on(\"mousemove\",u),!1}for(k=0;k<b.length;k+=2)if(f=Math.sqrt(Math.pow(e-\nb[k],2)+Math.pow(a-b[k+1],2)),6>f)return g=k,d(this).on(\"mousemove\",q),!1;for(k=0;k<b.length;k+=2)1<k&&(f=w(e,a,b[k],b[k+1],b[k-2],b[k-1],!0),6>f&&(h=k));b.splice(h,0,Math.round(e),Math.round(a));g=h;d(this).on(\"mousemove\",q);l();m();return!1});d(document).find(h).on(\"contextmenu\",function(a){a.preventDefault();a.offsetX||(a.offsetX=a.pageX-d(a.target).offset().left,a.offsetY=a.pageY-d(a.target).offset().top);var c=a.offsetX;a=a.offsetY;for(var e=0;e<b.length;e+=2)if(dis=Math.sqrt(Math.pow(c-b[e],\n2)+Math.pow(a-b[e+1],2)),6>dis){b.splice(e,2);l();m();break}return!1});d(document).find(h).on(\"mouseup\",function(){d(this).off(\"mousemove\");m();g=null})};d(document).ready(function(){d(\".canvas-area[data-image-url]\").canvasAreaDraw()});var w=function(d,f,e,b,g,h,c){function n(b,c,d,e){return Math.sqrt((b-=d)*b+(c-=e)*c)}if(c&&!(c=function(b,c,d,e,f,a){if(!(f-d))return{x:d,y:c};if(!(a-e))return{x:b,y:e};var h,g=-1/((a-e)/(f-d));return{x:h=(f*(b*g-c+e)+d*(b*-g+c-a))/(g*(f-d)+e-a),y:g*h-g*b+c}}(d,f,\ne,b,g,h),c.x>=Math.min(e,g)&&c.x<=Math.max(e,g)&&c.y>=Math.min(b,h)&&c.y<=Math.max(b,h)))return e=n(d,f,e,b),d=n(d,f,g,h),e>d?d:e;c=b-h;var l=g-e;return Math.abs(c*d+l*f+(e*h-b*g))/Math.sqrt(c*c+l*l)}})(jQuery);\n"],"sourceRoot":""}